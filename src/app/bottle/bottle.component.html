<!--
    Inspired by Code Pen User
    Jamie Dixon, with this pen
    https://codepen.io/JamieDixon/pen/Pqrjvv

    I cleaned up a lot of errors and redundant stuff
    then made it more awesome and customizeable
-->

<div class="wrapper">

  <span class="instructions">The progress bubble below can transition between red, orange, and green depending on the current percentage.</span>
  <span class="instructions">Go ahead and try it out by using the text box below.</span>
<div style = "width:50%">
  <div class="green content">
    <div class="progress">
      <div class="inner">
        <div class="percent"><span>{{level.value}}</span>%</div>
        <div class="water" [ngStyle]="{'top':(100-level.value)+'%'}" ></div>
        <div class="glare"></div>
        <div class="glare glare2"></div>
      </div>
    </div>
  </div>
</div>
  <span>Enter Percentage: <input #level (blur)="showWater(level.value)" type="text" id="percent-box">%</span>

  <section id="copyright">
    <div>(c) 2015 John Mothershed - <a href="https://opensource.org/licenses/MIT">License MIT</a> </div>

    <div>Work is modified and inspired from <a href="https://codepen.io/JamieDixon/pen/Pqrjvv">Jamie Dixon's pen</a></div>
  </section>
</div>
<script>
  var colorInc = 100 / 3;

  $(function()
  {
    $("#percent-box").click(function()
    {
      $(this).select();
    });

    $("#percent-box").keyup(function()
    {
      var val = $(this).val();

      if(val != ""
        && !isNaN(val)
        && val <= 100
        && val >= 0)
      {
        console.log(val);

        var valOrig = val;
        val = 100 - val;

        if(valOrig == 0)
        {
          $("#percent-box").val(0);
          $(".progress .percent").text(0 + "%");
        }
        else $(".progress .percent").text(valOrig + "%");

        $(".progress").parent().removeClass();
        $(".progress .water").css("top", val + "%");

        if(valOrig < colorInc * 1)
          $(".progress").parent().addClass("red");
        else if(valOrig < colorInc * 2)
          $(".progress").parent().addClass("orange");
        else
          $(".progress").parent().addClass("green");
      }
      else
      {
        $(".progress").parent().removeClass();
        $(".progress").parent().addClass("green");
        $(".progress .water").css("top", 100 - 67 + "%");
        $(".progress .percent").text(67 + "%");
        $("#percent-box").val("");
      }
    });
  });

</script>
